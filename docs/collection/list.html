<html>
  <head>
    <meta charset="UTF-8">
    <title>6. リスト - Apache Groovyチュートリアル</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/highlight.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/my.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-84847594-1', 'auto');
      ga('send', 'pageview');
      
    </script>
  </head>
  <body>
    <div class="wrapper">
      <div class="header">
        <i class="fa fa-bars sidebar-toggle"></i>
        <span class="title"><a href="../index.html">Apache Groovyチュートリアル</a></span>
      </div>
      <div class="sidebar">
        <ul>
          <li class="numbered visible">
            <a href="../index.html" data-alt-hash="apache-groovy-"><span class="number">1.</span>Apache Groovy チュートリアル</a>
            <ul>
              <li class="numbered visible"><a href="../index.html#id-42307f13d9d6d9fe7f15eb0536255b824fe0af1c"><span class="number">1.1.</span>さぁ始めよう！&hellip;の前に</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../what-is-groovy.html" data-alt-hash="apache-groovy"><span class="number">2.</span>Apache Groovyとは</a>
            <ul>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-fcad98b6bc96cf66e20f986f0973d2575fce430b"><span class="number">2.1.</span>シンプル&amp;パワフル</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-f9356a26c4c26110d0fb85dbe07c07c28751e391"><span class="number">2.2.</span>巨大なエコシステム</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-5f52ad0dbb814a0559eb8aa4b4a645c74bbedd8d"><span class="number">2.3.</span>気軽に実行</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-6f37a8477bcb751f15dedcbcc9ee8a9cc90ef061"><span class="number">2.4.</span>実験コードのお供に</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-ef4e0df42b47b23ce15bc3ccadd1d8d8e43f8385"><span class="number">2.5.</span>ビルドツール要らず</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#java"><span class="number">2.6.</span>Javaの友達</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-319e80ab91fa4b24ead46ec990e7890d8a62c899"><span class="number">2.7.</span>もちろんプロダクトとしても</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#ok"><span class="number">2.8.</span>どこからでもOK</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../startup/index.html" data-alt-hash="startup"><span class="number">3.</span>Startup</a>
            <ul>
              <li class="numbered visible"><a href="../startup/install.html" data-alt-hash="install"><span class="number">3.1.</span>Install</a></li>
              <li class="numbered visible"><a href="../startup/install.html#hello-world"><span class="number">3.2.</span>Hello World</a></li>
              <li class="numbered visible">
                <a href="../startup/execution.html" data-alt-hash="id-947e8b547a7ee2d2d16471408918f148e7008486"><span class="number">3.3.</span>色々な実行方法</a>
                <ul>
                  <li class="numbered visible"><a href="../startup/execution.html#groovyconsole"><span class="number">3.3.1.</span>GroovyConsole</a></li>
                  <li class="numbered visible"><a href="../startup/execution.html#groovysh"><span class="number">3.3.2.</span>Groovysh</a></li>
                  <li class="numbered visible"><a href="../startup/execution.html#id-da28f0cd33cb1f1e6ce383dde43065522845c2e8"><span class="number">3.3.3.</span>ファイルに保存してスクリプトとして実行</a></li>
                  <li class="numbered visible">
                    <a href="../startup/execution.html#id-fcbfd717080ef34d6aa5a6da494d789c4907d1a2"><span class="number">3.3.4.</span>ファイルに保存してコンパイル&amp;実行</a>
                    <ul>
                      <li class="numbered invisible"><a href="../startup/execution.html#class"><span class="number">3.3.4.1.</span>ファイル名と生成されるclassファイル名の関係</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../variable/index.html" data-alt-hash="id-5221440a56644419d70a10bd0ccf693a2126dc64"><span class="number">4.</span>変数</a>
            <ul>
              <li class="numbered visible"><a href="../variable/index.html#def"><span class="number">4.1.</span>defキーワード</a></li>
              <li class="numbered visible"><a href="../variable/index.html#id-a6077d27e5f63be9d00575f8249b0ab98c2688cd"><span class="number">4.2.</span>型の変数名を同時に宣言</a></li>
              <li class="numbered visible"><a href="../variable/index.html#id-bdb4879c8865cab8f31f2e02bedfab64275778af"><span class="number">4.3.</span>いきなり変数名</a></li>
              <li class="numbered visible"><a href="../variable/index.html#id-94a94a68c07cac95e9dad0fb1b2cc0ac0080a74d"><span class="number">4.4.</span>まとめ</a></li>
              <li class="numbered visible"><a href="../variable/index.html#other-memo"><span class="number">4.5.</span>Other memo</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../if/index.html" data-alt-hash="if"><span class="number">5.</span>if文</a>
            <ul>
              <li class="numbered visible"><a href="../if/index.html#id-678b445de32757354dbd7b4d6d27a2679cb663a4"><span class="number">5.1.</span>普通のif</a></li>
              <li class="numbered visible"><a href="../if/index.html#assert"><span class="number">5.2.</span>assert</a></li>
              <li class="numbered visible"><a href="../if/index.html#id-b2368db87fc524b107821a7f97dc24e3c3fb7a3c"><span class="number">5.3.</span>三項演算子を使う</a></li>
              <li class="numbered visible"><a href="../if/index.html#groovy-truth"><span class="number">5.4.</span>Groovy Truth</a></li>
              <li class="numbered visible"><a href="../if/index.html#id-7f0ecf6d4f8badbce300a7cea1560cdc3eb80466"><span class="number">5.5.</span>エルビス演算子を使う</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="list.html" data-alt-hash="id-b096d14061757613f9bb4fc3fdebeed1df3d7feb"><span class="number">6.</span>リスト</a>
            <ul>
              <li class="numbered visible"><a href="list.html#collect"><span class="number">6.1.</span>collect</a></li>
              <li class="numbered visible"><a href="list.html#inject"><span class="number">6.2.</span>inject</a></li>
              <li class="numbered visible"><a href="list.html#find"><span class="number">6.3.</span>find</a></li>
              <li class="numbered visible"><a href="list.html#findall"><span class="number">6.4.</span>findAll</a></li>
              <li class="numbered visible"><a href="list.html#id-a3b0399fa150d0a6ed3d5fdb94debdbc965b43be"><span class="number">6.5.</span>まとめ</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../closure/index.html" data-alt-hash="id-bc9ded214e97abd0647bbea508cb878324996e3e"><span class="number">7.</span>クロージャ</a>
            <ul>
              <li class="numbered visible"><a href="../closure/index.html#id-46071e2f627a54763ae382cb6ffc2b0b1e589013"><span class="number">7.1.</span>クロージャを使ってみる</a></li>
              <li class="numbered visible"><a href="../closure/index.html#id-a6cf382c283896094fb20f51b389e9deec62dd3f"><span class="number">7.2.</span>さらに詳しく</a></li>
              <li class="numbered visible"><a href="../closure/index.html#id-72c1711cd57bf25317237dd75f8c6d35545942dd"><span class="number">7.3.</span>関数合成</a></li>
              <li class="numbered visible"><a href="../closure/index.html#thisownerdelegate"><span class="number">7.4.</span>特殊変数this、owner、delegate</a></li>
              <li class="numbered visible"><a href="../closure/index.html#id-6578dcdcd86d65fc13e0e91b122bc41b2ba1ba08"><span class="number">7.5.</span>まとめ</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="map.html" data-alt-hash="id-5408c1debd592f8b0779d2c9a302fbff89fb39ba"><span class="number">8.</span>マップ</a>
            <ul>
              <li class="numbered visible"><a href="map.html#id-44e8571a56f022b3396fee07d6450bfd950e1a67"><span class="number">8.1.</span>繰り返し</a></li>
              <li class="numbered visible"><a href="map.html#id-f8648999b740988e6ed27a5561760fe061ecb760"><span class="number">8.2.</span>リストとマップを組みあせる</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../null-safe/index.html" data-alt-hash="null"><span class="number">9.</span>Nullセーフ</a>
            <ul>
              <li class="numbered visible"><a href="../null-safe/index.html#java8optional"><span class="number">9.1.</span>Java8のOptional</a></li>
              <li class="numbered visible"><a href="../null-safe/index.html#groovy"><span class="number">9.2.</span>Groovyのセーフナビゲーション</a></li>
              <li class="numbered visible"><a href="../null-safe/index.html#id-462a855457497e0f699b75d35950c57e31a0545b"><span class="number">9.3.</span>サンプルコード</a></li>
              <li class="numbered visible"><a href="../null-safe/index.html#id-18aee802319ad5c16cd55c381c87b42226a4b149"><span class="number">9.4.</span>その他の方法</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../class/index.html" data-alt-hash="id-8b27332ee07f76ea4db44d6a7bdcdcf813427e3a"><span class="number">10.</span>クラス</a>
            <ul>
              <li class="numbered visible"><a href="../class/index.html#2"><span class="number">10.1.</span>クラスは2つ以上定義しても良い</a></li>
              <li class="numbered visible"><a href="../class/index.html#id-400faaa494727732c94af024c637e0d2129b72f9"><span class="number">10.2.</span>セッターとゲッター</a></li>
            </ul>
          </li>
          <li class="numbered visible"><a href="../class/trait.html" data-alt-hash="trait"><span class="number">11.</span>Trait（トレイト）</a></li>
          <li class="numbered visible">
            <a href="../external-library/index.html" data-alt-hash="groovy"><span class="number">12.</span>Groovyで外部ライブラリを利用する</a>
            <ul>
              <li class="numbered visible"><a href="../external-library/index.html#id-48131f790a0fdc19674de80e966b50d2d2954fa2"><span class="number">12.1.</span>実際に試してみよう</a></li>
              <li class="numbered visible"><a href="../external-library/index.html#id-d3fd06b21472dc0e54bce2592d61eaa19369b573"><span class="number">12.2.</span>複数のライブラリを扱う</a></li>
              <li class="numbered visible"><a href="../external-library/index.html#id-28df4375b1a38168d0fe528efd2d82fb65d313c0"><span class="number">12.3.</span>ちょっと補足</a></li>
              <li class="numbered visible"><a href="../external-library/index.html#id-1ff68e378d712588bb7314663b7ec5f58e4ba62a"><span class="number">12.4.</span>まとめ</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../unit-test/index.html" data-alt-hash="id-24ac0411c687979683b211ecda6744d511f0ac85"><span class="number">13.</span>ユニットテスト</a>
            <ul>
              <li class="numbered visible"><a href="../unit-test/index.html#spock"><span class="number">13.1.</span>初めてのSpock</a></li>
              <li class="numbered visible">
                <a href="../unit-test/index.html#id-be6ccbd026a73b061ec8e027551cad6733d3deb4"><span class="number">13.2.</span>フィーチャーメソッドとフィーチャーブロック</a>
                <ul>
                  <li class="numbered visible"><a href="../unit-test/index.html#whenthensetup"><span class="number">13.2.1.</span>whenとthen（そしてsetup）</a></li>
                  <li class="numbered visible"><a href="../unit-test/index.html#expect"><span class="number">13.2.2.</span>expect</a></li>
                  <li class="numbered visible"><a href="../unit-test/index.html#cleanup"><span class="number">13.2.3.</span>cleanup</a></li>
                  <li class="numbered visible">
                    <a href="../unit-test/index.html#where"><span class="number">13.2.4.</span>where</a>
                    <ul>
                      <li class="numbered invisible"><a href="../unit-test/index.html#unroll"><span class="number">13.2.4.1.</span>@Unrollアノテーション</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li class="numbered visible"><a href="../unit-test/index.html#id-bdd1a5a8c07a267571c3bd781ab9082669c5959f"><span class="number">13.3.</span>フィクスチャーメソッド</a></li>
              <li class="numbered visible"><a href="../unit-test/index.html#id-b3c1ea2a3b540798f7cd793487a346fffeec9c09"><span class="number">13.4.</span>各フィーチャーメソッドで共通して利用する変数</a></li>
              <li class="numbered visible"><a href="../unit-test/index.html#id-efba724c0eb52b004593236e37d0a25a1544ad6b"><span class="number">13.5.</span>実践</a></li>
              <li class="numbered visible"><a href="../unit-test/index.html#bdd"><span class="number">13.6.</span>テストをより分かりやすくする（BDDスタイル）</a></li>
              <li class="numbered visible"><a href="../unit-test/index.html#id-0a441a00637070d401d9e5a2653510c5967d9a05"><span class="number">13.7.</span>まとめ</a></li>
            </ul>
          </li>
          <li class="numbered visible"><a href="../regular-expression/index.html" data-alt-hash="regular-expression"><span class="number">14.</span>Regular Expression</a></li>
          <li class="numbered visible"><a href="../meta/index.html" data-alt-hash="meta-programming"><span class="number">15.</span>Meta programming</a></li>
          <li class="numbered visible">
            <a href="../static-groovy/index.html" data-alt-hash="groovy"><span class="number">16.</span>静的Groovy</a>
            <ul>
              <li class="numbered visible"><a href="../static-groovy/index.html#id-b940591a92fde629fb71008c7b7e053237d7b8b4"><span class="number">16.1.</span>メソッド</a></li>
              <li class="numbered visible">
                <a href="../static-groovy/index.html#id-83dac9bdf0c71085ffa7a638a3bee37744fe1645"><span class="number">16.2.</span>ローカル変数</a>
                <ul>
                  <li class="numbered visible"><a href="../static-groovy/index.html#compilestatictypechecked"><span class="number">16.2.1.</span>CompileStaticとTypeChecked</a></li>
                </ul>
              </li>
              <li class="numbered visible"><a href="../static-groovy/index.html#id-1ff68e378d712588bb7314663b7ec5f58e4ba62a"><span class="number">16.3.</span>まとめ</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../gpars/index.html" data-alt-hash="gpars"><span class="number">17.</span>GPars</a>
            <ul>
              <li class="numbered visible"><a href="../gpars/actor.html" data-alt-hash="actor"><span class="number">17.1.</span>Actor</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../practice/index.html" data-alt-hash="id-0f8f1522a9609f45ebe45c4c425ad7a726b1bb7f"><span class="number">18.</span>実践/サンプル集</a>
            <ul>
              <li class="numbered visible">
                <a href="../practice/dataset-and-trait-orm.html" data-alt-hash="datasettraitorm"><span class="number">18.1.</span>DataSetとTraitを使って簡単なORM</a>
                <ul>
                  <li class="numbered visible"><a href="../practice/dataset-and-trait-orm.html#id-76d4ffa3e7d72bf89f94b60af5f750d2d06dc1e8"><span class="number">18.1.1.</span>概要</a></li>
                  <li class="numbered visible"><a href="../practice/dataset-and-trait-orm.html#dataset"><span class="number">18.1.2.</span>DataSetのメモ</a></li>
                  <li class="numbered visible"><a href="../practice/dataset-and-trait-orm.html#id-7cb81475f86083b4ca6d8d3613d555118b576307"><span class="number">18.1.3.</span>本題</a></li>
                  <li class="numbered visible"><a href="../practice/dataset-and-trait-orm.html#trait"><span class="number">18.1.4.</span>traitと値を保持するクラスの作成</a></li>
                  <li class="numbered visible"><a href="../practice/dataset-and-trait-orm.html#id-72165400ede0a770ea8388c83d7b6583d826ac00"><span class="number">18.1.5.</span>実際に使ってみる</a></li>
                  <li class="numbered visible"><a href="../practice/dataset-and-trait-orm.html#id-3579f9fc20f87289e5d0d884038577d96b81aa67"><span class="number">18.1.6.</span>まとめ</a></li>
                </ul>
              </li>
              <li class="numbered visible"><a href="../practice/dataset-and-trait-orm.html#id-a1880f698b418cb966ee0aa6196f852a004c403d"><span class="number">18.2.</span>参考</a></li>
              <li class="numbered visible"><a href="../practice/dataset-and-trait-orm.html#id-595f48397a467a332eb14dcea74660ae4fdd653a"><span class="number">18.3.</span>全体ソース</a></li>
              <li class="numbered visible"><a href="../practice/convert-decimal.html" data-alt-hash="102"><span class="number">18.4.</span>10進数を2進数に変換する</a></li>
              <li class="numbered visible"><a href="../practice/samples-link.html" data-alt-hash="id-0d3bb1d122715fe5433159eb6ea50caa02c25184"><span class="number">18.5.</span>サンプルリンク集</a></li>
              <li class="numbered visible"><a href="../practice/cli-tool.html" data-alt-hash="cli"><span class="number">18.6.</span>CLIツールの実装</a></li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="content">
        <div class="content-handle"></div>
        <div class="content-container">
          <div class="content-nav content-nav-top">
            <a class="prev-page" href="../if/index.html">
            <i class="fa fa-angle-left"></i>
            <span class="number">5.</span>
            if文
            </a>
            <a class="next-page" href="../closure/index.html">
            <span class="number">7.</span>
            クロージャ
            <i class="fa fa-angle-right"></i>
            </a>
          </div>
          <div class="page-toc">
            <ul>
              <li class="numbered visible">
                <a href="#id-b096d14061757613f9bb4fc3fdebeed1df3d7feb"><span class="number">6.</span>リスト</a>
                <ul>
                  <li class="numbered visible"><a href="#collect"><span class="number">6.1.</span>collect</a></li>
                  <li class="numbered visible"><a href="#inject"><span class="number">6.2.</span>inject</a></li>
                  <li class="numbered visible"><a href="#find"><span class="number">6.3.</span>find</a></li>
                  <li class="numbered visible"><a href="#findall"><span class="number">6.4.</span>findAll</a></li>
                  <li class="numbered visible"><a href="#id-a3b0399fa150d0a6ed3d5fdb94debdbc965b43be"><span class="number">6.5.</span>まとめ</a></li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="main-content">
            <h1 id="id-b096d14061757613f9bb4fc3fdebeed1df3d7feb"><span class="number">6.</span>リスト</h1>
            <p>ここでいうリストとは、配列、JavaでいうArrayListなどのことです。<br/>リストを使うことによって、一つの変数の中に、あたかも複数の値が格納されているかのように振る舞います。</p>
            <ul>
              <li>Javaの場合</li>
            </ul>
            <pre><code class="java">List&lt;Integer&gt; lists = Arrays.asList(1, 2, 3);
</code></pre>
            <ul>
              <li>PHPの場合</li>
            </ul>
            <pre><code class="php">$list = array(1, 2, 3, 4)

// 5.4以降
$list = [1, 2, 3, 4];
</code></pre>
            <p>Groovyではこれらを <strong>List</strong> として扱います。<br/>例えば上記の例はGroovyだと以下のように表現します。 </p>
            <pre><code class="groovy">List list = [1, 2, 3, 4]
</code></pre>
            <p>では、このlistの値をそれぞれ画面に表示してみましょう。<br/>Javaのように書くと以下のようになります。 </p>
            <pre><code class="groovy">List list = [1,2,3,4]
for(def i = 0; i &lt; list.size(); i++) {
    println list[i]
}
</code></pre>
            <p>Listの宣言はGroovy独特ですが、for文はJavaと特に変わりはありませんね。<br/>この方法でも特に問題はありませんが、Groovyではこれをもっとシンプルに実現できます。<br/>それが以下のコードです。</p>
            <pre><code class="groovy">List list = [1,2,3,4]
list.each {
    println it
}
</code></pre>
            <p>とてもシンプルになりましたね！<br/>この例ではGroovyのListにある<code>each</code>というメソッドを利用しています。<br/><code>each</code>メソッドは、Listの中身をそれぞれ順番に処理するためのメソッドです。<br/><code>each</code>メソッドが自動的にListの中身を先頭から順番に、<code>{...}</code>の中に記述した処理に渡してくれて、<code>{...}</code>を実行してくれます。<br/> 詳しくは別章で扱いますが、<code>{...}</code>の部分をClosure（クロージャ）と呼びます。<br/> クロージャの中にある<code>it</code>は暗黙的に利用できる変数で、<code>it</code>には<code>each</code>メソッドが自動的にListの要素を渡してくれます。<br/><code>it</code>を別名で宣言したり、型の宣言をつけたりもできます。 </p>
            <pre><code class="groovy">List list = [1,2,3,4]

// eachメソッドがlistの各要素を順番にvalに格納して{...}の中身を実行する。
list.each {val -&gt;
    println val
}

// 型の指定もできる。
list.each {Integer val -&gt;
    println val
}

// list変数に格納しなくても実行できる
[1,2,3,4].each {
    println it
}
</code></pre>
            <p>Groovyでは基本的にfor文やwhile文を利用せずに、Listに存在するこのeachメソッドのような専用のメソッドを利用して繰り返し処理を実行します。<br/>メリットとして、今まではlistとfor/whileという少なくとも二人の登場人物が必要でしたが、それがlistオブジェクトだけでよくなります。<br/>さらに、for文がなくなるということはiなどの添え字変数が必要なくなります。<br/>シンプルになる、変数が少なくなるということはそれだけバグが潜り込む箇所が少なくなるということになります。<br/>今までfor文などでずっとループを書いていた場合は、このGroovy（を含め関数型プログラミング言語に見られる）のListの処理方法には違和感を感じるかもしれません。<br/>しかし、一旦慣れてしまえば必ずこの方法が好きになるはずです！ </p>
            <p>当然ただ値を表示するだけではなく、計算したり加工したりもできます。 </p>
            <pre><code class="groovy">// 各要素を２倍して表示する
[1,2,3,4].each {
    println it * 2
}

// &quot;-&quot; という文字列を、各要素の個数表示する
// Groovyでは、Stringに数字を掛けることでかけた回数分Stringが繰り替えされたものが得られる
[1,2,3,4].each {
    println &quot;-&quot; * it
}

</code></pre>
            <p>Groovyのリストにはいくつかとても重要なメソッドが用意されています。それぞれ見ていきます。 </p>
            <h2 id="collect"><span class="number">6.1.</span>collect</h2>
            <p><code>collect</code>メソッドを使うと、リストの各要素を順番に処理できます。<br/>つまり、<code>each</code>メソッドと同じですね。<br/>しかし重要な違いとして、 <strong>実行結果を返す</strong> という点が有ります。<br/>そのため、元々あったリストを変換するために用いられます。 </p>
            <pre><code class="groovy">assert [1,2,3].collect { it * 2 } == [2, 4, 6]
</code></pre>
            <p><code>{ it * 2 }</code>の中身が実行されています。<br/>すでに述べたように、リストの各要素を <code>{...}</code>の中で変換して、返します。<br/>それを自動的に新しいリストに詰めなおしてくれます。<br/>注意点は、元々あったリストは変更されず、<code>collect</code>メソッドによって中身が変更された <strong>新しいリストが返さえれる</strong> という点です。 実際に試してみましょう。 </p>
            <pre><code class="groovy">def list = [1,2,3]
def list2 = list.collect {
    it * 2
}

assert [1,2,3] == list
assert [2,4,6] == list2
</code></pre>
            <p>元々の<code>list</code>の値は変わっておらず、<code>list2</code>に<code>collect</code>メソッドによって<code>list</code>の中身を変更された新しいリストが格納されていますね。<br/>なお、お分かりの通り、実際の変換処理である<code>{...}</code>の中には<code>return</code>が書かれていませんね。<br/>ifの章で述べた3項演算子の用に、態々<code>return</code>を書かなくても、Groovyは最後に評価された値を返してくれます。 </p>
            <p>この <strong>リストの中身を変換して、新しいリストとして返す</strong> という機能、考え方はGroovyに限らず、関数型プログラミングと呼ばれるパラダイムでは非常に重要な概念となります。<br/>この処理を（意図的に古い）Javaのオーソドックスなパターンで記述すると以下のようになります。 </p>
            <pre><code class="groovy">def list = [1,2,3]
def list2 = []

for( def i = 0; i &lt; list.size(); i++ ) {
    list2.add( list[i] * 2 )
}

assert [1,2,3] == list
assert [2,4,6] == list2
</code></pre>
            <p>パット見で明らかに冗長そう、という点もそうなのですが、上記の例だと、一旦<code>list2</code>という空のリストを生成して、for文の中でそのリストに値を追加していく、とう処理になっています。<br/>この方式だと、実際に重要な処理をしているのは当然<code>for</code>なのですが、この<code>for</code>の中で外側の変数を使っている、という所に落とし穴が潜んでいます。<br/>明らかに肝心な処理の外側に、関心を寄せる対象（list2という変数）が存在している点です。<br/>コレがもし長い処理の末に実行されていたとしたら、常にその変数（list2）に気を配らなければなりません。<br/>その点、<code>collect</code>の場合は、処理対象のリストから順番に値が渡され、その値を処理して返すだけなので、その肝心の処理をどうするかだけを考えれば良いわけです。 </p>
            <p>当然、必ずそうしなければならない、というわけではありません。場合によってはオールドスクールな方法のほうが良い場合も当然有ります。<br/>場合によって使い分ければOKです。</p>
            <h2 id="inject"><span class="number">6.2.</span>inject</h2>
            <p>さて、次に<code>inject</code>メソッドです。<br/>このメソッドは慣れるまで非常に分かりづらいです。<br/>なのでまずは実際に以下のコードを自分で実行してみてください。 </p>
            <pre><code class="groovy">assert [1,2,3].inject{a, b -&gt; a + b} == 6
</code></pre>
            <p>この短い例だとわかりやすいですね。どうやら<code>[1,2,3]</code>というリストの合計が求められたようです。<br/><code>inject</code>メソッドは、リストの先頭要素とその次の要素を<code>{...}</code>にそれぞれ渡して、その実行結果を返す、そして、その実行結果と次の要素を<code>{...}</code>にそれぞれ渡して、その実行結果を返す&hellip;という処理をリストの最後まで繰り返すメソッドです。</p>
            <p>この例だと、<br/>1. <code>inject</code>メソッドがリストの0番目と1番目の要素を抜き出してクロージャにそれぞれ渡す。(今回だと1と2という値)<br/>2. クロージャではその渡された値を利用して処理をする。（1 + 2）<br/>3. クロージャの処理結果がリターンされる。(3という計算結果)<br/>4. <code>inject</code>はその実行結果を取得し、その実行結果と次の2番めの要素（今回は3という値）をクロージャに渡す。（つまり3と3という値）<br/>5. クロージャではその渡された値を利用して処理をする。（3 + 3）<br/>6. <code>inject</code>はその実行結果を取得し、もう全てのリスト要素を走査したので、最終的な実行結果である6を返す。 </p>
            <p>となります。<br/>コレを応用して、リストから最大値を抜き出す、という処理を以下のように記述できます。 </p>
            <pre><code class="groovy">assert [5,3,6,10,8,0,1].inject {a,b -&gt;
    a &gt; b ? a : b
} == 10
</code></pre>
            <p>さて、ではココでも（意図的に古い）Javaのオーソドックスなパターンで試してみましょう。 </p>
            <pre><code class="groovy">def list = [5,3,6,10,8,0,1]
Integer max = 0

for (def i = 0; i &lt; list.size(); i++) {
    if ( max &lt; list[i] ) {
        max = list[i]
    }
}

assert max == 10
</code></pre>
            <p><code>collect</code>の時と同じように、<code>for</code>の外側に実行結果を格納する変数を用意しなければなりません。<br/>つまり同じような問題が発生する可能性がある、ということですね。 </p>
            <h2 id="find"><span class="number">6.3.</span>find</h2>
            <p>さて、ちょっと難しかったですがここから少し楽になります。<br/>メソッド名から分かるように、<code>find</code>メソッドはリストの中から<code>{...}</code>で指定する条件に合致するものから最初のものを返します。</p>
            <pre><code class="groovy">assert [1,2,3].find { it % 2 != 0} == 1
</code></pre>
            <p>そのまんまですね。<br/>注意点としては、条件に合致するものが複数あっても、その最初の1つしか返さないという点です。<br/>条件に合致する全てのものが欲しい場合、次の<code>findAll</code>メソッドを利用します。 </p>
            <h2 id="findall"><span class="number">6.4.</span>findAll</h2>
            <p>リストの中から<code>{...}</code>で指定する条件に合致するものを全て返します。 複数の値が帰ってくるので、当然実行結果はリストになります。</p>
            <pre><code class="groovy">assert [1,2,3].findAll { it % 2 != 0} == [1,3]
</code></pre>
            <p>合致するものが1つだけであろうと、リスト形式で返されます。</p>
            <pre><code class="groovy">assert [1,2,3].findAll { it % 2 == 0} == [2]
</code></pre>
            <h2 id="id-a3b0399fa150d0a6ed3d5fdb94debdbc965b43be"><span class="number">6.5.</span>まとめ</h2>
            <p>どうだったでしょうか。<br/>Rubyなどを使ったことがある人なら特に違和感の無い内容だとは思いますが、Java7までしか使ったことがない場合などは中々難しい内容だったのではないかと思います。<br/>重要なのは、リストを処理するには、 <strong>リストの中身を変換して、新しいリストとして返す/別の値を返す</strong> ということです。 </p>
            <p>さて、 <strong>新しいリストとして返す</strong> という点に注目してみましょう。<br/><code>collect</code>は新しいリストを返します。つまり、その結果に対して更に別のリスト用メソッドを適用することが出来るのです！<br/>それでは最後にサンぷるとして、1から10までの整数のうち、偶数だけを抜き出して、それらをさらに2倍して、合計を求める処理を書いてみます。<br/>なお、この <strong>1から10</strong> のようにレンジを求める際、Groovyでは<code>(1..10)</code>と表現できます。それも合わせて見てみましょう。 </p>
            <pre><code class="groovy">assert 60 == (1..10).findAll {
    it % 2 == 0 // 偶数のものだけ抽出
}.collect {
    it * 2 // リストの中身をそれぞれ2倍に変換
}.inject {a,b -&gt;
    a + b // リストの中身をそれぞれ足し合わせていく
}
</code></pre>
            <p>コレ以外にも<a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/List.html">様々な便利なメソッドが存在します。</a><br/>色々試してみましょう。</p>
          </div>
          <div class="content-nav content-nav-bottom">
            <a class="prev-page" href="../if/index.html">
            <i class="fa fa-angle-left"></i>
            <span class="number">5.</span>
            if文
            </a>
            <a class="next-page" href="../closure/index.html">
            <span class="number">7.</span>
            クロージャ
            <i class="fa fa-angle-right"></i>
            </a>
          </div>
          <div class="footer">
            <p class="credit text-muted">Powered by <a href="https://github.com/kobo/gaiden">Gaiden</a></p>
          </div>
        </div>
      </div>
    </div>
    <script src="../js/jquery-2.1.1.min.js"></script>
    <script src="../js/highlight.js"></script>
    <script src="../js/application.js"></script>
    <script src="../js/my.js"></script>
  </body>
</html>
