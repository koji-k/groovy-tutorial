<html>
  <head>
    <meta charset="UTF-8">
    <title>8. マップ - Apache Groovyチュートリアル</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/highlight.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/my.css">
  </head>
  <body>
    <div class="wrapper">
      <div class="header">
        <i class="fa fa-bars sidebar-toggle"></i>
        <span class="title"><a href="../index.html">Apache Groovyチュートリアル</a></span>
      </div>
      <div class="sidebar">
        <ul>
          <li class="numbered visible">
            <a href="../index.html" data-alt-hash="apache-groovy-"><span class="number">1.</span>Apache Groovy チュートリアル</a>
            <ul>
              <li class="numbered visible"><a href="../index.html#id-42307f13d9d6d9fe7f15eb0536255b824fe0af1c"><span class="number">1.1.</span>さぁ始めよう！&hellip;の前に</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../what-is-groovy.html" data-alt-hash="apache-groovy"><span class="number">2.</span>Apache Groovyとは</a>
            <ul>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-fcad98b6bc96cf66e20f986f0973d2575fce430b"><span class="number">2.1.</span>シンプル&amp;パワフル</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-f9356a26c4c26110d0fb85dbe07c07c28751e391"><span class="number">2.2.</span>巨大なエコシステム</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-5f52ad0dbb814a0559eb8aa4b4a645c74bbedd8d"><span class="number">2.3.</span>気軽に実行</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-6f37a8477bcb751f15dedcbcc9ee8a9cc90ef061"><span class="number">2.4.</span>実験コードのお供に</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-ef4e0df42b47b23ce15bc3ccadd1d8d8e43f8385"><span class="number">2.5.</span>ビルドツール要らず</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#java"><span class="number">2.6.</span>Javaの友達</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#id-319e80ab91fa4b24ead46ec990e7890d8a62c899"><span class="number">2.7.</span>もちろんプロダクトとしても</a></li>
              <li class="numbered visible"><a href="../what-is-groovy.html#ok"><span class="number">2.8.</span>どこからでもOK</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../startup/index.html" data-alt-hash="startup"><span class="number">3.</span>Startup</a>
            <ul>
              <li class="numbered visible"><a href="../startup/install.html" data-alt-hash="install"><span class="number">3.1.</span>Install</a></li>
              <li class="numbered visible"><a href="../startup/install.html#hello-world"><span class="number">3.2.</span>Hello World</a></li>
              <li class="numbered visible">
                <a href="../startup/execution.html" data-alt-hash="id-947e8b547a7ee2d2d16471408918f148e7008486"><span class="number">3.3.</span>色々な実行方法</a>
                <ul>
                  <li class="numbered visible"><a href="../startup/execution.html#groovyconsole"><span class="number">3.3.1.</span>GroovyConsole</a></li>
                  <li class="numbered visible"><a href="../startup/execution.html#groovysh"><span class="number">3.3.2.</span>Groovysh</a></li>
                  <li class="numbered visible"><a href="../startup/execution.html#id-da28f0cd33cb1f1e6ce383dde43065522845c2e8"><span class="number">3.3.3.</span>ファイルに保存してスクリプトとして実行</a></li>
                  <li class="numbered visible">
                    <a href="../startup/execution.html#id-fcbfd717080ef34d6aa5a6da494d789c4907d1a2"><span class="number">3.3.4.</span>ファイルに保存してコンパイル&amp;実行</a>
                    <ul>
                      <li class="numbered invisible"><a href="../startup/execution.html#class"><span class="number">3.3.4.1.</span>ファイル名と生成されるclassファイル名の関係</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../variable/index.html" data-alt-hash="id-5221440a56644419d70a10bd0ccf693a2126dc64"><span class="number">4.</span>変数</a>
            <ul>
              <li class="numbered visible"><a href="../variable/index.html#def"><span class="number">4.1.</span>defキーワード</a></li>
              <li class="numbered visible"><a href="../variable/index.html#id-a6077d27e5f63be9d00575f8249b0ab98c2688cd"><span class="number">4.2.</span>型の変数名を同時に宣言</a></li>
              <li class="numbered visible"><a href="../variable/index.html#id-bdb4879c8865cab8f31f2e02bedfab64275778af"><span class="number">4.3.</span>いきなり変数名</a></li>
              <li class="numbered visible"><a href="../variable/index.html#id-94a94a68c07cac95e9dad0fb1b2cc0ac0080a74d"><span class="number">4.4.</span>まとめ</a></li>
              <li class="numbered visible"><a href="../variable/index.html#other-memo"><span class="number">4.5.</span>Other memo</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../if/index.html" data-alt-hash="if"><span class="number">5.</span>if文</a>
            <ul>
              <li class="numbered visible"><a href="../if/index.html#id-678b445de32757354dbd7b4d6d27a2679cb663a4"><span class="number">5.1.</span>普通のif</a></li>
              <li class="numbered visible"><a href="../if/index.html#assert"><span class="number">5.2.</span>assert</a></li>
              <li class="numbered visible"><a href="../if/index.html#id-b2368db87fc524b107821a7f97dc24e3c3fb7a3c"><span class="number">5.3.</span>三項演算子を使う</a></li>
              <li class="numbered visible"><a href="../if/index.html#groovy-truth"><span class="number">5.4.</span>Groovy Truth</a></li>
              <li class="numbered visible"><a href="../if/index.html#id-7f0ecf6d4f8badbce300a7cea1560cdc3eb80466"><span class="number">5.5.</span>エルビス演算子を使う</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="list.html" data-alt-hash="id-b096d14061757613f9bb4fc3fdebeed1df3d7feb"><span class="number">6.</span>リスト</a>
            <ul>
              <li class="numbered visible"><a href="list.html#collect"><span class="number">6.1.</span>collect</a></li>
              <li class="numbered visible"><a href="list.html#inject"><span class="number">6.2.</span>inject</a></li>
              <li class="numbered visible"><a href="list.html#find"><span class="number">6.3.</span>find</a></li>
              <li class="numbered visible"><a href="list.html#findall"><span class="number">6.4.</span>findAll</a></li>
              <li class="numbered visible"><a href="list.html#id-a3b0399fa150d0a6ed3d5fdb94debdbc965b43be"><span class="number">6.5.</span>まとめ</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../closure/index.html" data-alt-hash="id-bc9ded214e97abd0647bbea508cb878324996e3e"><span class="number">7.</span>クロージャ</a>
            <ul>
              <li class="numbered visible"><a href="../closure/index.html#id-46071e2f627a54763ae382cb6ffc2b0b1e589013"><span class="number">7.1.</span>クロージャを使ってみる</a></li>
              <li class="numbered visible"><a href="../closure/index.html#id-a6cf382c283896094fb20f51b389e9deec62dd3f"><span class="number">7.2.</span>さらに詳しく</a></li>
              <li class="numbered visible"><a href="../closure/index.html#thisownerdelegate"><span class="number">7.3.</span>特殊変数this、owner、delegate</a></li>
              <li class="numbered visible"><a href="../closure/index.html#id-6578dcdcd86d65fc13e0e91b122bc41b2ba1ba08"><span class="number">7.4.</span>まとめ</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="map.html" data-alt-hash="id-5408c1debd592f8b0779d2c9a302fbff89fb39ba"><span class="number">8.</span>マップ</a>
            <ul>
              <li class="numbered visible"><a href="map.html#id-44e8571a56f022b3396fee07d6450bfd950e1a67"><span class="number">8.1.</span>繰り返し</a></li>
              <li class="numbered visible"><a href="map.html#id-f8648999b740988e6ed27a5561760fe061ecb760"><span class="number">8.2.</span>リストとマップを組みあせる</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../class/index.html" data-alt-hash="id-8b27332ee07f76ea4db44d6a7bdcdcf813427e3a"><span class="number">9.</span>クラス</a>
            <ul>
              <li class="numbered visible"><a href="../class/index.html#2"><span class="number">9.1.</span>クラスは2つ以上定義しても良い</a></li>
              <li class="numbered visible"><a href="../class/index.html#id-400faaa494727732c94af024c637e0d2129b72f9"><span class="number">9.2.</span>セッターとゲッター</a></li>
            </ul>
          </li>
          <li class="numbered visible"><a href="../class/trait.html" data-alt-hash="trait"><span class="number">10.</span>Trait（トレイト）</a></li>
          <li class="numbered visible">
            <a href="../external-library/index.html" data-alt-hash="groovy"><span class="number">11.</span>Groovyで外部ライブラリを利用する</a>
            <ul>
              <li class="numbered visible"><a href="../external-library/index.html#id-48131f790a0fdc19674de80e966b50d2d2954fa2"><span class="number">11.1.</span>実際に試してみよう</a></li>
              <li class="numbered visible"><a href="../external-library/index.html#id-d3fd06b21472dc0e54bce2592d61eaa19369b573"><span class="number">11.2.</span>複数のライブラリを扱う</a></li>
              <li class="numbered visible"><a href="../external-library/index.html#id-28df4375b1a38168d0fe528efd2d82fb65d313c0"><span class="number">11.3.</span>ちょっと補足</a></li>
              <li class="numbered visible"><a href="../external-library/index.html#id-1ff68e378d712588bb7314663b7ec5f58e4ba62a"><span class="number">11.4.</span>まとめ</a></li>
            </ul>
          </li>
          <li class="numbered visible">
            <a href="../unit-test/index.html" data-alt-hash="id-24ac0411c687979683b211ecda6744d511f0ac85"><span class="number">12.</span>ユニットテスト</a>
            <ul>
              <li class="numbered visible"><a href="../unit-test/index.html#spock"><span class="number">12.1.</span>初めてのSpock</a></li>
              <li class="numbered visible">
                <a href="../unit-test/index.html#id-be6ccbd026a73b061ec8e027551cad6733d3deb4"><span class="number">12.2.</span>フィーチャーメソッドとフィーチャーブロック</a>
                <ul>
                  <li class="numbered visible"><a href="../unit-test/index.html#whenthensetup"><span class="number">12.2.1.</span>whenとthen（そしてsetup）</a></li>
                  <li class="numbered visible"><a href="../unit-test/index.html#expect"><span class="number">12.2.2.</span>expect</a></li>
                  <li class="numbered visible"><a href="../unit-test/index.html#cleanup"><span class="number">12.2.3.</span>cleanup</a></li>
                  <li class="numbered visible">
                    <a href="../unit-test/index.html#where"><span class="number">12.2.4.</span>where</a>
                    <ul>
                      <li class="numbered invisible"><a href="../unit-test/index.html#unroll"><span class="number">12.2.4.1.</span>@Unrollアノテーション</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li class="numbered visible"><a href="../unit-test/index.html#id-bdd1a5a8c07a267571c3bd781ab9082669c5959f"><span class="number">12.3.</span>フィクスチャーメソッド</a></li>
              <li class="numbered visible"><a href="../unit-test/index.html#id-b3c1ea2a3b540798f7cd793487a346fffeec9c09"><span class="number">12.4.</span>各フィーチャーメソッドで共通して利用する変数</a></li>
              <li class="numbered visible"><a href="../unit-test/index.html#id-efba724c0eb52b004593236e37d0a25a1544ad6b"><span class="number">12.5.</span>実践</a></li>
              <li class="numbered visible"><a href="../unit-test/index.html#id-0a441a00637070d401d9e5a2653510c5967d9a05"><span class="number">12.6.</span>まとめ</a></li>
            </ul>
          </li>
          <li class="numbered visible"><a href="../regular-expression/index.html" data-alt-hash="regular-expression"><span class="number">13.</span>Regular Expression</a></li>
          <li class="numbered visible"><a href="../meta/index.html" data-alt-hash="meta-programming"><span class="number">14.</span>Meta programming</a></li>
          <li class="numbered visible">
            <a href="../static-groovy/index.html" data-alt-hash="groovy"><span class="number">15.</span>静的Groovy</a>
            <ul>
              <li class="numbered visible"><a href="../static-groovy/index.html#id-b940591a92fde629fb71008c7b7e053237d7b8b4"><span class="number">15.1.</span>メソッド</a></li>
              <li class="numbered visible">
                <a href="../static-groovy/index.html#id-83dac9bdf0c71085ffa7a638a3bee37744fe1645"><span class="number">15.2.</span>ローカル変数</a>
                <ul>
                  <li class="numbered visible"><a href="../static-groovy/index.html#compilestatictypechecked"><span class="number">15.2.1.</span>CompileStaticとTypeChecked</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="numbered visible"><a href="../static-groovy/index.html#id-5af6083ed6fdbe3e7b8bee85529e65aa3468da09"><span class="number">16.</span>まとめ</a></li>
          <li class="numbered visible">
            <a href="../practice/index.html" data-alt-hash="id-0f8f1522a9609f45ebe45c4c425ad7a726b1bb7f"><span class="number">17.</span>実践/サンプル集</a>
            <ul>
              <li class="numbered visible"><a href="../practice/samples-link.html" data-alt-hash="id-0d3bb1d122715fe5433159eb6ea50caa02c25184"><span class="number">17.1.</span>サンプルリンク集</a></li>
              <li class="numbered visible"><a href="../practice/cli-tool.html" data-alt-hash="cli"><span class="number">17.2.</span>CLIツールの実装</a></li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="content">
        <div class="content-handle"></div>
        <div class="content-container">
          <div class="content-nav content-nav-top">
            <a class="prev-page" href="../closure/index.html">
            <i class="fa fa-angle-left"></i>
            <span class="number">7.</span>
            クロージャ
            </a>
            <a class="next-page" href="../class/index.html">
            <span class="number">9.</span>
            クラス
            <i class="fa fa-angle-right"></i>
            </a>
          </div>
          <div class="page-toc">
            <ul>
              <li class="numbered visible">
                <a href="#id-5408c1debd592f8b0779d2c9a302fbff89fb39ba"><span class="number">8.</span>マップ</a>
                <ul>
                  <li class="numbered visible"><a href="#id-44e8571a56f022b3396fee07d6450bfd950e1a67"><span class="number">8.1.</span>繰り返し</a></li>
                  <li class="numbered visible"><a href="#id-f8648999b740988e6ed27a5561760fe061ecb760"><span class="number">8.2.</span>リストとマップを組みあせる</a></li>
                </ul>
              </li>
            </ul>
          </div>
          <div class="main-content">
            <h1 id="id-5408c1debd592f8b0779d2c9a302fbff89fb39ba"><span class="number">8.</span>マップ</h1>
            <p>マップとは、PHPでいう連想配列（のようなもの）、JavaのHashtableなどに該当するものです。<br/>大雑把に言うと、リストの中にある各値に専用の名前をつけてあげることが出来ます。</p>
            <ul>
              <li>PHPの場合</li>
            </ul>
            <pre><code class="php">map = array(
    &quot;foo&quot; =&gt; &quot;bar&quot;,
    &quot;bar&quot; =&gt; &quot;foo&quot;,
);

// 5.4 以降
$map = [
      &quot;foo&quot; =&gt; &quot;bar&quot;,
      &quot;bar&quot; =&gt; &quot;foo&quot;,
];
</code></pre>
            <ul>
              <li>Javaの場合</li>
            </ul>
            <pre><code class="java">import java.util.*
Hashtable hashtable = new Hashtable()
hashtable.put(&quot;foo&quot;, &quot;bar&quot;)
hashtable.put(&quot;bar&quot;, &quot;foo&quot;)
</code></pre>
            <p>ではGroovyの場合を見て行きましょう。</p>
            <pre><code class="groovy">Map map = [foo:&quot;bar&quot;, bar:&quot;foo&quot;]
</code></pre>
            <p>JavaよりはPHPの連想配列の作り方に似ていますね。<br/>上記の最も基本的なMapの宣言方法を見て分かるとおり、リストの中に<code>キー:値</code>という形式で値を記述します。<br/>実際に使ってみましょう。</p>
            <pre><code class="groovy">Map map = [foo:&quot;bar&quot;, bar:&quot;foo&quot;]

// 値の取り出し
assert map.foo == &quot;bar&quot;
assert map.get(&quot;foo&quot;) == &quot;bar&quot;
assert map[&quot;foo&quot;] == &quot;bar&quot;
assert map.bar == &quot;foo&quot;

// 値の上書き
map[&quot;bar&quot;] = &quot;foo_updated&quot;
assert map.bar == &quot;foo_updated&quot;
map.put(&quot;bar&quot;, &quot;foot_updated2&quot;)
assert map.bar ==  &quot;foot_updated2&quot;

// 値の追加
map[&quot;hoge&quot;] = &quot;hoge_value&quot;
assert map.size() == 3
assert map.hoge == &quot;hoge_value&quot;

map.put(&quot;piyo&quot;, &quot;piyo_value&quot;)
assert map.size() == 4
assert map.piyo == &quot;piyo_value&quot;
</code></pre>
            <p>とてもシンプルですね。<br/>値の取り出し方や、セットの仕方は複数あります。目的にあった方法を選択しましょう。<br/>例えば、変数に入っている値をキーにしてMapから値を取得する場合、以下のような方法が有ります。 </p>
            <pre><code class="groovy">Map map = [foo:&quot;bar&quot;, bar:&quot;foo&quot;]
String key = &quot;bar&quot;

assert map[key] == &quot;foo&quot;
</code></pre>
            <h2 id="id-44e8571a56f022b3396fee07d6450bfd950e1a67"><span class="number">8.1.</span>繰り返し</h2>
            <p>マップにもリストのように、便利な繰り返しメソッドが備わっています。<br/>いつもの<code>each</code>メソッドを試してみましょう。 </p>
            <pre><code class="groovy">Map map = [foo:&quot;bar&quot;, bar:&quot;foo&quot;]
map.each {
   println it
}
</code></pre>
            <p>実行結果として</p>
            <pre><code class="nohighlight">foo=bar
bar=foo
</code></pre>
            <p>と表示されましたね？ でもコレだとキーと値を別個に取得できません。<br/>そこで、Mapの場合は<code>key</code>と<code>value</code>というプロパティが存在します。</p>
            <pre><code class="groovy">Map map = [foo:&quot;bar&quot;, bar:&quot;foo&quot;]
map.each {
    println &quot;key = ${it.key}, value = ${it.value}&quot;
}
</code></pre>
            <p>ちゃんとキーとプロパティを別個に取得出来ましたね。</p>
            <h2 id="id-f8648999b740988e6ed27a5561760fe061ecb760"><span class="number">8.2.</span>リストとマップを組みあせる</h2>
            <p>それでは少し応用を効かせてリストとマップを組み合わせてみましょう。<br/>内容は、Mapでユーザの情報を持ち、その情報をそれぞれListにて保持するというものです。</p>
            <pre><code class="groovy">List userList = [
    [&quot;name&quot;: &quot;aaa&quot;, age:20],
    [&quot;name&quot;: &quot;bbb&quot;, age:25],
    [&quot;name&quot;: &quot;ccc&quot;, age:30],
    [&quot;name&quot;: &quot;ddd&quot;, age:35]
]
</code></pre>
            <p>それでは、全てのユーザの名前を表示してみましょう。</p>
            <pre><code class="groovy">userList.each {Map user -&gt;
    println user.name
}
</code></pre>
            <p>ユーザ名が一覧で表示されましたか？ </p>
            <p>それでは今度は逆に、マップの中にリストを突っ込んでみましょう！<br/>例えば各ユーザが複数の得意なプログラミング言語を持っている場合を想定しましょう。</p>
            <pre><code class="groovy">List userList = [
    [&quot;name&quot;: &quot;aaa&quot;, age:20, languages:[&quot;Java&quot;]],
    [&quot;name&quot;: &quot;bbb&quot;, age:25, languages:[&quot;Java&quot;, &quot;PHP&quot;]],
    [&quot;name&quot;: &quot;ccc&quot;, age:30, languages:[]],
    [&quot;name&quot;: &quot;ddd&quot;, age:35, languages:[&quot;Groovy&quot;]]
]

userList.each {Map user -&gt;
    println &quot;userName:${user.name}&quot;
    user.languages.each {
        println it
    }
    println &quot;&quot; // 見やすくするために改行
}
</code></pre>
            <p>複雑そうに見えますが、基本的にリストやマップで用意されている<code>each</code>などのメソッドを使って、素直に処理を書いていくだけです。<br/>Mapはそれ単体でももちろん利用しますが、リストと組み合わせて利用されることが多いので、色々試してみましょう。</p>
          </div>
          <div class="content-nav content-nav-bottom">
            <a class="prev-page" href="../closure/index.html">
            <i class="fa fa-angle-left"></i>
            <span class="number">7.</span>
            クロージャ
            </a>
            <a class="next-page" href="../class/index.html">
            <span class="number">9.</span>
            クラス
            <i class="fa fa-angle-right"></i>
            </a>
          </div>
          <div class="footer">
            <p class="credit text-muted">Powered by <a href="https://github.com/kobo/gaiden">Gaiden</a></p>
          </div>
        </div>
      </div>
    </div>
    <script src="../js/jquery-2.1.1.min.js"></script>
    <script src="../js/highlight.js"></script>
    <script src="../js/application.js"></script>
    <script src="../js/my.js"></script>
  </body>
</html>
